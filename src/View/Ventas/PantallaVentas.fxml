<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="Controller.Ventas.POSController"
            stylesheets="/View/CSS/Style.css">

    <left>
        <VBox spacing="10.0" prefWidth="500.0" style="-fx-background-color: #F4F6F6;">
            <padding><Insets bottom="20" left="20" right="10" top="20" /></padding>

            <Label text="Catálogo de Productos" textFill="#6F4E37">
                <font><Font name="System Bold" size="18.0" /></font>
            </Label>

            <HBox spacing="10.0">
                <TextField fx:id="campoBusqueda" promptText="Buscar por nombre o código..."
                           styleClass="campo-cafeteria" HBox.hgrow="ALWAYS" />
                <Button onAction="#buscarProducto" text="Buscar" styleClass="boton-cafeteria" />
            </HBox>

            <TableView fx:id="tablaProductos" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="colProdNombre" text="Producto" prefWidth="250.0" />
                    <TableColumn fx:id="colProdPrecio" text="Precio" prefWidth="80.0" />
                    <TableColumn fx:id="colProdStock" text="Stock" prefWidth="80.0" />
                </columns>
                <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
            </TableView>

            <Button fx:id="btnAgregar" maxWidth="Infinity" onAction="#agregarAlCarrito"
                    text="Agregar al Carrito →" styleClass="boton-cafeteria" />
        </VBox>
    </left>

    <center>
        <VBox spacing="10.0" style="-fx-background-color: white;">
            <padding><Insets bottom="20" left="10" right="20" top="20" /></padding>

            <Label text="Ticket de Venta Actual" textFill="#6F4E37">
                <font><Font name="System Bold" size="18.0" /></font>
            </Label>

            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="Cliente:" style="-fx-font-weight: bold;" textFill="#4A332A"/>
                <ComboBox fx:id="cmbClientes" prefWidth="250.0" promptText="Seleccione Cliente" styleClass="campo-cafeteria"/>
            </HBox>

            <TableView fx:id="tablaCarrito" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="colCarrProducto" text="Producto" prefWidth="200.0" />
                    <TableColumn fx:id="colCarrCantidad" text="Cant." prefWidth="60.0" />
                    <TableColumn fx:id="colCarrTotal" text="Total" prefWidth="90.0" />
                </columns>
                <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
            </TableView>

            <GridPane hgap="10" vgap="5" style="-fx-background-color: #FEFDF5; -fx-background-radius: 20; -fx-border-color: #DCC7AA; -fx-border-radius: 20;">
                <padding>
                    <Insets top="15" right="15" bottom="15" left="15"/>
                </padding>

                <columnConstraints>
                    <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" />
                    <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" halignment="RIGHT"/>
                </columnConstraints>

                <Label text="Subtotal:" textFill="#4A332A"/>
                <Label fx:id="lblSubtotal" text="\$0.00" GridPane.columnIndex="1" textFill="#4A332A"/>

                <Label text="Impuestos:" GridPane.rowIndex="1" textFill="#4A332A"/>
                <Label fx:id="lblImpuestos" text="\$0.00" GridPane.columnIndex="1" GridPane.rowIndex="1" textFill="#4A332A"/>

                <Label text="TOTAL:" textFill="#c0392b" GridPane.rowIndex="2">
                    <font><Font name="System Bold" size="20.0" /></font>
                </Label>
                <Label fx:id="lblTotal" text="\$0.00" textFill="#c0392b" GridPane.columnIndex="1" GridPane.rowIndex="2">
                    <font><Font name="System Bold" size="20.0" /></font>
                </Label>
            </GridPane>

            <HBox spacing="10.0" alignment="CENTER_RIGHT">
                <Button onAction="#cancelarVenta" text="Cancelar"
                        styleClass="boton-cafeteria"
                        style="-fx-background-color: #E74C3C;"
                        prefHeight="40" prefWidth="100"/>

                <Button fx:id="btnCobrar" onAction="#realizarCobro" text="Cobrar"
                        styleClass="boton-cafeteria"
                        style="-fx-background-color: #27AE60;"
                        prefHeight="40" prefWidth="150"/>
            </HBox>

        </VBox>
    </center>

</BorderPane>